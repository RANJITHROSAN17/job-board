<!DOCTYPE html>
<html lang="en">
  <head>
    <title>How to fix Go mod unknown revision</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <meta name="title" content="How to fix Go mod unknown revision" />
    <meta name="keywords" content="go mod, go mod unknown revision, go mod private repo, golang mod, golang modules" />
    <meta name="description" content="How to fix Go mod unknown revision" />
    <meta itemprop="name" content="How to fix Go mod unknown revision">
    <meta itemprop="description" content="How to fix Go mod unknown revision">
    <meta itemprop="image" content="https://golang.cafe/s/img/cafe.jpg">
    <meta property="og:url" content="https://golang.cafe">
    <meta property="og:type" content="website">
    <meta property="og:title" content="How to fix Go mod unknown revision">
    <meta property="og:description" content="How to fix Go mod unknown revision">
    <meta property="og:image" content="https://golang.cafe/s/img/cafe.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How to fix Go mod unknown revision">
    <meta name="twitter:description" content="How to fix Go mod unknown revision">
    <meta name="twitter:image" content="https://golang.cafe/s/img/cafe.jpg">
    <meta name="twitter:site" content="@golangcafe"/>
    <style type="text/css">
body{background:#ffffff;}
      input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}th{font-weight:600}td,th{border-bottom:1.08px solid #595959;overflow:auto;padding:14.85px 18px;text-align:left;vertical-align:top}thead th{border-bottom-width:2.16px;padding-bottom:6.3px}table{display:table;overflow-x:auto}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}fieldset{display:flex;flex-direction:row;flex-wrap:wrap}fieldset legend{margin:18px 0}input,textarea,select,button{border-radius:3.6px;display:inline-block;padding:9.9px}input+label,input+input[type="checkbox"],input+input[type="radio"],textarea+label,textarea+input[type="checkbox"],textarea+input[type="radio"],select+label,select+input[type="checkbox"],select+input[type="radio"],button+label,button+input[type="checkbox"],button+input[type="radio"]{page-break-before:always}input,select,label{margin-right:3.6px}textarea{min-height:90px;min-width:360px}label{display:inline-block;margin-bottom:12.6px}label+*{page-break-before:always}label>input{margin-bottom:0}input[type="submit"],input[type="reset"],button{background:#f2f2f2;color:#191919;cursor:pointer;display:inline;margin-bottom:18px;margin-right:7.2px;padding:6.525px 23.4px;text-align:center}input[type="submit"]:hover,input[type="reset"]:hover,button:hover{background:#d9d9d9;color:#000}input[type="submit"][disabled],input[type="reset"][disabled],button[disabled]{background:#e6e5e5;color:#403f3f;cursor:not-allowed}input[type="submit"],button[type="submit"]{background:#000090;color:#fff}input[type="submit"]:hover,button[type="submit"]:hover{background:#0000c5;color:#ffffff}input,select,textarea{margin-bottom:18px}input[type="text"],input[type="password"],input[type="email"],input[type="url"],input[type="phone"],input[type="tel"],input[type="number"],input[type="datetime"],input[type="date"],input[type="month"],input[type="week"],input[type="color"],input[type="time"],input[type="search"],input[type="range"],input[type="file"],input[type="datetime-local"],select,textarea{border:1px solid #595959;padding:5.4px 6.3px}input[type="checkbox"],input[type="radio"]{flex-grow:0;height:29.7px;margin-left:0;margin-right:9px;vertical-align:middle}input[type="checkbox"]+label,input[type="radio"]+label{page-break-before:avoid}select[multiple]{min-width:270px}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}kbd,samp,var,output{font-family:Menlo,Monaco,Consolas,"Courier New",monospace;font-size:14.4px}pre{border-left:1.8px solid #59c072;line-height:25.2px;overflow:auto;padding-left:18px}kbd{background:#daf1e0;border-radius:3.6px;color:#2a6f3b;display:inline-block;line-height:18px;padding:3.6px 6.3px 2.7px}kbd{background:#2a6f3b;color:#fff}mark{background:#ffc;padding:0 3.6px}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}h1,h2,h3,h4,h5,h6{color:#000;margin-bottom:18px}h1{font-size:36px;font-weight:500;line-height:41.4px;margin-top:72px}h2{font-size:25.2px;font-weight:400;line-height:30.6px;margin-top:54px}h3{font-size:21.6px;line-height:27px;margin-top:36px}h4{font-size:18px;line-height:23.4px;margin-top:18px}h5{font-size:14.4px;font-weight:bold;line-height:21.6px;text-transform:uppercase}h6{color:#595959;font-size:14.4px;font-weight:bold;line-height:18px;text-transform:uppercase}input,textarea,select,button,option,html,body{font-family:Helvetica;font-size:18px;font-stretch:normal;font-style:normal;font-weight:400;line-height:29.7px}a{color:#000090;text-decoration:none}a:hover{text-decoration:underline}hr{border-bottom:1px solid #595959}figcaption,small{font-size:15.3px}figcaption{color:#595959}var,em,i{font-style:italic}dt,strong,b{font-weight:600}del,s{text-decoration:line-through}ins,u{text-decoration:underline}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}*{border:0;border-collapse:separate;border-spacing:0;box-sizing:border-box;margin:0;max-width:100%;outline:0;padding:0;vertical-align:baseline}html,body{width:100%}html{height:100%}body{color:#1a1919;}p,ul,ol,dl,blockquote,hr,pre,table,form,fieldset,figure,address{margin-bottom:29.7px}section{margin-left:auto;margin-right:auto;width:780px}article,header,footer{padding:43.2px}article{word-wrap: break-word;background:#fff;border:1px solid #d9d9d9;border-radius:7.2px}nav{text-align:center}nav ul{list-style:none;margin-left:0;text-align:center}nav ul li{display:inline-block;margin-left:9px;margin-right:9px;vertical-align:middle}nav ul li:last-child{margin-right:0}ol,ul{margin-left:31.5px}li dl,li ol,li ul{margin-bottom:0}dl{display:inline-block}dt{padding:0 18px}dd{padding:0 18px 4.5px}dd:last-of-type{border-bottom:1.08px solid #595959}dd+dt{border-top:1.08px solid #595959;padding-top:9px}blockquote{border-left:2.16px solid #595959;padding:4.5px 18px 4.5px 15.84px}blockquote footer{color:#595959;font-size:13.5px;margin:0}blockquote p{margin-bottom:0}img{height:auto;margin:0 auto}figure img{display:block}/*# sourceMappingURL=tacit-css-1.3.2.min.css.map */
      input{-webkit-appearance: none;-moz-appearance: none;appearance: none;}
      #carbonads{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",Helvetica,Arial,sans-serif}#carbonads{display:inline;max-width:330px;background-color:#f9f9f9;box-shadow:0 1px 4px 1px hsla(0,0%,0%,.1)}#carbonads a{color:inherit;text-decoration:none}#carbonads a:hover{color:inherit}#carbonads span{position:relative;display:block;overflow:hidden}#carbonads .carbon-wrap{display:flex}.carbon-img{display:block;margin:0;line-height:1}.carbon-img img{display:block}.carbon-text{font-size:13px;padding:10px;line-height:1.5;text-align:left}.carbon-poweredby{display:block;padding:8px 10px;background:repeating-linear-gradient(-45deg,transparent,transparent 5px,hsla(0,0%,0%,.025) 5px,hsla(0,0%,0%,.025) 10px) hsla(203,11%,95%,.4);text-align:center;text-transform:uppercase;letter-spacing:.5px;font-weight:600;font-size:9px;line-height:1}
        .menu-header{text-align:left;width: 100%;margin:20px auto;border-bottom:1px solid #d9d9d9;}.menu-header a {white-space:pre;color: black;font-size: 12pt;font-weight: bold;padding-right: 5px;}header{padding:0 10px;width:780px;margin:auto;}
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism.min.css" rel="stylesheet" />
  </head>
  <body>
    <header>
      <nav class="menu-header">
        <small>
            <a href="/">Jobs</a>&bull;
            <a href="/Golang-Developer-Salary-Remote">Salaries</a>&bull;
            <a href="/Companies-Using-Golang">Companies</a>&bull;
            <a href="/Golang-Developers">Developers</a>
          <br>
        </small>
      </nav>
    </header>
    <section style="margin:30px auto;">
      <article>
<h1 class="code-line" data-line-start=0 data-line-end=1 ><a id="How_to_fix_Go_mod_unknown_revision_0"></a>How to fix Go mod unknown revision</h1>
<p class="has-line-data" data-line-start="2" data-line-end="4">After the introduction of Go mod you may have worked with Go modules and private repositories. When working on a Go project that uses the new Go modules package management and versioning system and working exclusively with public packages you won’t generally encounter any major issue.<br>
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3J&placement=golangcafe" id="_carbonads_js"></script><br />
However when trying to import a Go package that is into a private repository you might encounter problems when running Go build or Go modules commands. You might see an issue as follows:</p>
<pre><code class="language-go" data-line-start="6" data-line-end="9">$ go build
go: github.com/acme-corporation/internal-rpc-client@v0.1.5: unknown revision v0.1.5
</code></pre>
<p class="has-line-data" data-line-start="10" data-line-end="11">If you have had a similar error you are not alone. This means that Go modules can’t rightfully access a private package.</p>
<h2 class="code-line" data-line-start=12 data-line-end=13 ><a id="How_to_resolve_Go_mod_unknown_revision_when_accessing_private_repositories_12"></a>How to resolve Go mod unknown revision when accessing private repositories</h2>
<h3 class="code-line" data-line-start=14 data-line-end=15 ><a id="1_Make_sure_you_have_set_GO111MODULES_14"></a>1. Make sure you have set GO111MODULES</h3>
<p class="has-line-data" data-line-start="16" data-line-end="17">Make sure you are using Go modules correctly this tells Go to use Go modules in case you are running an old version or Go or you have disabled Go modules by mistake. This is necessary for running the next steps.</p>
<pre><code class="language-go" data-line-start="19" data-line-end="21">go env -w GO111MODULE=on
</code></pre>
<h3 class="code-line" data-line-start=22 data-line-end=23 ><a id="2_Add_your_organisation_private_repository_to_GOPRIVATE_22"></a>2. Add your organisation private repository to GOPRIVATE</h3>
<p class="has-line-data" data-line-start="24" data-line-end="25">The Go team has rightfully thought about the possiblity of having private packages when working with Go mod and created a help tool to describe such scenario</p>
<pre><code class="language-go" data-line-start="27" data-line-end="46">go help module-private

The go command defaults to downloading modules from the public 
Go module mirror at proxy.golang.org. It also defaults 
to validating downloaded modules,regardless of source, 
against the public Go checksum database at sum.golang.org.

These defaults work well for publicly available source code.

The GOPRIVATE environment variable controls which modules
the go command considers to be private (not available publicly) 
and should therefore not use the proxy or checksum database. 
The variable is a comma-separated list of glob patterns 
(in the syntax of Go's path.Match) of module path prefixes.

For example,

GOPRIVATE=*.corp.example.com,rsc.io/private
</code></pre>
<p class="has-line-data" data-line-start="47" data-line-end="48">The next step should therefore be as follows, which sets our private repository as “private” using the GOPRIVATE env variable</p>
<pre><code class="language-go" data-line-start="50" data-line-end="52">go env -w GOPRIVATE=github.com/acme-corporation/internal-rpc-client
</code></pre>
<h3 class="code-line" data-line-start=53 data-line-end=54 ><a id="3_Make_sure_your_git_configuration_is_appropriate_for_private_repositories_53"></a>3. Make sure your git configuration is appropriate for private repositories</h3>
<p class="has-line-data" data-line-start="55" data-line-end="56">Go mod uses git under the hood to retrieve remote package information. You should therefore tell git how to access private packages by updating the git configuration</p>
<pre><code class="language-go" data-line-start="58" data-line-end="60">git config --global url."ssh://git@github.com:acme-corporation".insteadOf "https://github.com/acme-corporation"
</code></pre>
<p class="has-line-data" data-line-start="61" data-line-end="62">This will allow your git client and consequently Go mod to use your ssh key to access and authenticate with github and access the private repository</p>
<h3 class="code-line" data-line-start=63 data-line-end=64 ><a id="4_Make_sure_to_create_a_personal_access_token_if_using_2FA_63"></a>4. Make sure to create a personal access token if using 2FA</h3>
<p class="has-line-data" data-line-start="65" data-line-end="66">In github specifically if you are using 2FA for your organisation, using your ssh key won’t work in this case and you will have instead to <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token">create a personal access token</a> and use that to access your private repository</p>
<pre><code class="language-go" data-line-start="68" data-line-end="70">git config --global url."https://<outh-token>:x-oauth-basic@github.com:acme-corporation".insteadOf "https://github.com/acme-corporation"
</code></pre>
<p class="has-line-data" data-line-start="71" data-line-end="72">For more info about private modules feel free to checkout  the official documentation <a href="https://golang.org/ref/mod#private-modules">https://golang.org/ref/mod#private-modules</a></p>
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CE7ITK3J&placement=golangcafe" id="_carbonads_js"></script><br />
      </article>
          <article class="line-item" style="margin-top:20px;">
		  <div style="width: 50%;font-size:15pt;text-align:center;font-weight:bold;display:table;margin:20px auto;" id="email-subscribe-item-text">Join the Golang Developers Community on Golang Cafe</div>
                <input type="submit" onclick="window.location.href='/Submit-Developer-Profile'" id="email-subscribe-item-btn" value="Join the Community" style="width:50%;display:table;margin:5px auto;"/>
            </article>
  </section>
  <footer>
    <nav>
      <small>    
        <a href="/">Golang Jobs</a> &bull;
        <a href="/about">About Golang Cafe</a>
        <br>
      </small>
    </nav>
  </footer>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/prism.min.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-go.min.js"></script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/components/prism-javascript.js"></script>

  
</body>
</html>
